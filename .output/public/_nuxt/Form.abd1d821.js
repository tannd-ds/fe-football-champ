import{_ as A,v as M,a8 as x,y as b,z as F,k as P,A as R,B as j,r as U,N as ee,q as c,C as ae,D as w,o,c as d,a as q,E as h,H as g,G as f,b as N,I,a9 as ne,S as le,U as V,aa as $,F as k,d as z,t as B,ab as te,h as ie,w as re,a6 as se,ac as oe}from"./entry.05f95d07.js";import{u as ue,a as W}from"./uid.5704820d.js";const v=M(b.ui.strategy,b.ui.input,x),de=F({components:{UIcon:P},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>v.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(v.size).includes(e)}},color:{type:String,default:()=>v.default.color,validator(e){return[...b.ui.colors,...Object.keys(v.color)].includes(e)}},variant:{type:String,default:()=>v.default.variant,validator(e){return[...Object.keys(v.variant),...Object.values(v.color).flatMap(l=>Object.keys(l))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","blur"],setup(e,{emit:l,slots:i}){const{ui:a,attrs:t}=R("input",j(e,"ui"),v,j(e,"class")),{emitFormBlur:m,emitFormInput:u,size:r,color:n,inputId:s,name:y}=ue(e,v),C=U(null),S=()=>{var p;e.autofocus&&((p=C.value)==null||p.focus())},Y=p=>{l("update:modelValue",p.target.value),u()},D=p=>{m(),l("blur",p)};ee(()=>{setTimeout(()=>{S()},100)});const L=c(()=>{var J,T;const p=((T=(J=a.value.color)==null?void 0:J[n.value])==null?void 0:T[e.variant])||a.value.variant[e.variant];return ae(w(a.value.base,a.value.rounded,a.value.placeholder,a.value.size[r.value],e.padded?a.value.padding[r.value]:"p-0",p==null?void 0:p.replaceAll("{color}",n.value),(E.value||i.leading)&&a.value.leading.padding[r.value],(G.value||i.trailing)&&a.value.trailing.padding[r.value]),e.inputClass)}),E=c(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),G=c(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),Z=c(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),H=c(()=>e.loading&&!E.value?e.loadingIcon:e.trailingIcon||e.icon),K=c(()=>w(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[r.value])),Q=c(()=>w(a.value.icon.base,b.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[r.value],e.loading&&"animate-spin")),X=c(()=>w(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[r.value])),_=c(()=>w(a.value.icon.base,b.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[r.value],e.loading&&!E.value&&"animate-spin"));return{ui:a,attrs:t,name:y,inputId:s,input:C,isLeading:E,isTrailing:G,inputClass:L,leadingIconName:Z,leadingIconClass:Q,leadingWrapperIconClass:K,trailingIconName:H,trailingIconClass:_,trailingWrapperIconClass:X,onInput:Y,onBlur:D}}}),ce=["id","name","value","type","required","placeholder","disabled"];function fe(e,l,i,a,t,m){const u=P;return o(),d("div",{class:f(e.ui.wrapper)},[q("input",h({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:["form-input",e.inputClass]},e.attrs,{onInput:l[0]||(l[0]=(...r)=>e.onInput&&e.onInput(...r)),onBlur:l[1]||(l[1]=(...r)=>e.onBlur&&e.onBlur(...r))}),null,16,ce),g(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(o(),d("span",{key:0,class:f(e.leadingWrapperIconClass)},[g(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[N(u,{name:e.leadingIconName,class:f(e.leadingIconClass)},null,8,["name","class"])])],2)):I("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(o(),d("span",{key:1,class:f(e.trailingWrapperIconClass)},[g(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[N(u,{name:e.trailingIconName,class:f(e.trailingIconClass)},null,8,["name","class"])])],2)):I("",!0)],2)}const me=A(de,[["render",fe]]),O=M(b.ui.strategy,b.ui.formGroup,ne),pe=F({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(O.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},setup(e){const{ui:l,attrs:i}=R("formGroup",j(e,"ui"),O,j(e,"class")),a=le("form-errors",null),t=c(()=>{var r,n;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(n=(r=a==null?void 0:a.value)==null?void 0:r.find(s=>s.path===e.name))==null?void 0:n.message}),m=c(()=>l.value.size[e.size??O.default.size]),u=U(W());return V("form-group",{error:t,inputId:u,name:c(()=>e.name),size:c(()=>e.size)}),{ui:l,attrs:i,inputId:u,size:m,error:t}}}),ge=["for"];function ve(e,l,i,a,t,m){return o(),d("div",h({class:e.ui.wrapper},e.attrs),[e.label||e.$slots.label?(o(),d("div",{key:0,class:f([e.ui.label.wrapper,e.size])},[q("label",{for:e.inputId,class:f([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?g(e.$slots,"label",$(h({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(o(),d(k,{key:1},[z(B(e.label),1)],64))],10,ge),e.hint||e.$slots.hint?(o(),d("span",{key:0,class:f([e.ui.hint])},[e.$slots.hint?g(e.$slots,"hint",$(h({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(o(),d(k,{key:1},[z(B(e.hint),1)],64))],2)):I("",!0)],2)):I("",!0),e.description||e.$slots.description?(o(),d("p",{key:1,class:f([e.ui.description,e.size])},[e.$slots.description?g(e.$slots,"description",$(h({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(o(),d(k,{key:1},[z(B(e.description),1)],64))],2)):I("",!0),q("div",{class:f([e.label?e.ui.container:""])},[g(e.$slots,"default",$(te({error:e.error}))),typeof e.error=="string"&&e.error||e.$slots.error?(o(),d("p",{key:0,class:f([e.ui.error,e.size])},[e.$slots.error?g(e.$slots,"error",$(h({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(o(),d(k,{key:1},[z(B(e.error),1)],64))],2)):e.help||e.$slots.help?(o(),d("p",{key:1,class:f([e.ui.help,e.size])},[e.$slots.help?g(e.$slots,"help",$(h({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(o(),d(k,{key:1},[z(B(e.help),1)],64))],2)):I("",!0)],2)],16)}const ye=A(pe,[["render",ve]]),he={__name:"Input",props:{modelValue:{type:String,required:!0},inputType:{type:String,default:"text"},isRequired:{type:Boolean,default:!1},label:{type:String,default:""},name:{type:String,default:""}},setup(e){const l=e;return(i,a)=>{const t=me,m=ye;return o(),ie(m,{required:l.isRequired,size:"xl",label:l.label,name:l.name},{default:re(()=>[N(t,{type:l.inputType,value:e.modelValue,onInput:a[0]||(a[0]=u=>i.$emit("update:modelValue",u.target.value))},null,8,["type","value"])]),_:1},8,["required","label","name"])}}},Ve=he,be=F({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit"],setup(e,{expose:l,emit:i}){const a=oe(`form-${W()}`);a.on(async n=>{var s;n.type!=="submit"&&((s=e.validateOn)!=null&&s.includes(n.type))&&await u(n.path,{silent:!0})});const t=U([]);V("form-errors",t),V("form-events",a);async function m(){let n=await e.validate(e.state);if(e.schema)if(we(e.schema))n=n.concat(await ke(e.state,e.schema));else if($e(e.schema))n=n.concat(await Se(e.state,e.schema));else if(ze(e.schema))n=n.concat(await Ce(e.state,e.schema));else if(Ee(e.schema))n=n.concat(await je(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return n}async function u(n,s={silent:!1}){if(n){const y=t.value.filter(S=>S.path!==n),C=(await m()).filter(S=>S.path===n);t.value=y.concat(C)}else t.value=await m();if(!s.silent&&t.value.length>0)throw new Error(`Form validation failed: ${JSON.stringify(t.value,null,2)}`);return e.state}async function r(n){var y;(y=e.validateOn)!=null&&y.includes("submit")&&await u();const s=n;s.data=e.state,i("submit",n)}return l({validate:u,errors:t,setErrors(n,s){t.value=n,s?t.value=t.value.filter(y=>y.path!==s).concat(n):t.value=n},getErrors(n){return n?t.value.filter(s=>s.path===n):t.value},clear(n){n?t.value=t.value.filter(s=>s.path===n):t.value=[]}}),{onSubmit:r}}});function $e(e){return e.validate&&e.__isYupSchema__}function Ie(e){return e.inner!==void 0}async function Se(e,l){try{return await l.validate(e,{abortEarly:!1}),[]}catch(i){if(Ie(i))return i.inner.map(a=>({path:a.path??"",message:a.message}));throw i}}function we(e){return e.parse!==void 0}async function ke(e,l){const i=await l.safeParseAsync(e);return i.success===!1?i.error.issues.map(a=>({path:a.path.join("."),message:a.message})):[]}function ze(e){return e.validateAsync!==void 0&&e.id!==void 0}function Be(e){return e.isJoi===!0}async function Ce(e,l){try{return await l.validateAsync(e,{abortEarly:!1}),[]}catch(i){if(Be(i))return i.details.map(a=>({path:a.path.join("."),message:a.message}));throw i}}function Ee(e){return e._parse!==void 0}async function je(e,l){const i=await l._parse(e);return i.issues?i.issues.map(a=>({path:a.path.map(t=>t.key).join("."),message:a.message})):[]}function Oe(e,l,i,a,t,m){return o(),d("form",{onSubmit:l[0]||(l[0]=se((...u)=>e.onSubmit&&e.onSubmit(...u),["prevent"]))},[g(e.$slots,"default")],32)}const Ae=A(be,[["render",Oe]]);export{Ve as _,Ae as a,ye as b};
