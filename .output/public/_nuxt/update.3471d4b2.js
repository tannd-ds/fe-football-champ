import{b as x,_ as ee,a as ae}from"./Form.abd1d821.js";import{_ as te,v as ne,x as le,y as T,z as ie,k as J,A as oe,B as P,q as r,C as ue,D as S,o as c,c as f,a as j,F as U,s as G,t as L,E as re,G as V,H as W,b,I as E,J as z,h as Y,w as $,m as se,i as de,n as ce,r as me,g as R,u as ge,d as D,j as d,l as ve}from"./entry.05f95d07.js";import{u as pe}from"./uid.5704820d.js";import{_ as fe}from"./AppForm.cb4da8ab.js";import{u as M}from"./AppCard.f52cb022.js";const g=ne(T.ui.strategy,T.ui.select,le),be=ie({components:{UIcon:J},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>g.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>g.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(e){return Object.keys(g.size).includes(e)}},color:{type:String,default:()=>g.default.color,validator(e){return[...T.ui.colors,...Object.keys(g.color)].includes(e)}},variant:{type:String,default:()=>g.default.variant,validator(e){return[...Object.keys(g.variant),...Object.values(g.color).flatMap(n=>Object.keys(n))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","change"],setup(e,{emit:n,slots:m}){const{ui:a,attrs:_}=oe("select",P(e,"ui"),g,P(e,"class")),{emitFormChange:C,inputId:s,color:l,size:t,name:v}=pe(e,g),k=i=>{n("update:modelValue",i.target.value)},N=i=>{C(),n("change",i)},B=i=>z(i,e.valueAttribute,z(i,e.optionAttribute)),O=i=>z(i,e.optionAttribute,z(i,e.valueAttribute)),u=i=>["string","number","boolean"].includes(typeof i)?{[e.valueAttribute]:i,[e.optionAttribute]:i}:{...i,[e.valueAttribute]:B(i),[e.optionAttribute]:O(i)},o=r(()=>e.options.map(i=>u(i))),y=r(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...o.value]:o.value),h=r(()=>{const i=u(e.modelValue),A=y.value.find(w=>w[e.valueAttribute]===i[e.valueAttribute]);return A?A[e.valueAttribute]:""}),F=r(()=>{var A,w;const i=((w=(A=a.value.color)==null?void 0:A[l.value])==null?void 0:w[e.variant])||a.value.variant[e.variant];return ue(S(a.value.base,a.value.rounded,a.value.size[t.value],e.padded?a.value.padding[t.value]:"p-0",i==null?void 0:i.replaceAll("{color}",l.value),(I.value||m.leading)&&a.value.leading.padding[t.value],(q.value||m.trailing)&&a.value.trailing.padding[t.value]),e.selectClass)}),I=r(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),q=r(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),p=r(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),H=r(()=>e.loading&&!I.value?e.loadingIcon:e.trailingIcon||e.icon),K=r(()=>S(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[t.value])),X=r(()=>S(a.value.icon.base,T.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[t.value],e.loading&&"animate-spin")),Q=r(()=>S(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[t.value])),Z=r(()=>S(a.value.icon.base,T.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[t.value],e.loading&&!I.value&&"animate-spin"));return{ui:a,attrs:_,name:v,inputId:s,normalizedOptionsWithPlaceholder:y,normalizedValue:h,isLeading:I,isTrailing:q,selectClass:F,leadingIconName:p,leadingIconClass:X,leadingWrapperIconClass:K,trailingIconName:H,trailingIconClass:Z,trailingWrapperIconClass:Q,onInput:k,onChange:N}}}),ye=["id","name","value","required","disabled"],he=["value","label"],_e=["value","selected","disabled","textContent"],Ce=["value","selected","disabled","textContent"];function Ie(e,n,m,a,_,C){const s=J;return c(),f("div",{class:V(e.ui.wrapper)},[j("select",re({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled||e.loading,class:["form-select",e.selectClass]},e.attrs,{onInput:n[0]||(n[0]=(...l)=>e.onInput&&e.onInput(...l)),onChange:n[1]||(n[1]=(...l)=>e.onChange&&e.onChange(...l))}),[(c(!0),f(U,null,G(e.normalizedOptionsWithPlaceholder,(l,t)=>(c(),f(U,null,[l.children?(c(),f("optgroup",{key:`${l[e.valueAttribute]}-optgroup-${t}`,value:l[e.valueAttribute],label:l[e.optionAttribute]},[(c(!0),f(U,null,G(l.children,(v,k)=>(c(),f("option",{key:`${v[e.valueAttribute]}-${t}-${k}`,value:v[e.valueAttribute],selected:v[e.valueAttribute]===e.normalizedValue,disabled:v.disabled,textContent:L(v[e.optionAttribute])},null,8,_e))),128))],8,he)):(c(),f("option",{key:`${l[e.valueAttribute]}-${t}`,value:l[e.valueAttribute],selected:l[e.valueAttribute]===e.normalizedValue,disabled:l.disabled,textContent:L(l[e.optionAttribute])},null,8,Ce))],64))),256))],16,ye),e.isLeading&&e.leadingIconName||e.$slots.leading?(c(),f("span",{key:0,class:V(e.leadingWrapperIconClass)},[W(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[b(s,{name:e.leadingIconName,class:V(e.leadingIconClass)},null,8,["name","class"])])],2)):E("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(c(),f("span",{key:1,class:V(e.trailingWrapperIconClass)},[W(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[b(s,{name:e.trailingIconName,class:V(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):E("",!0)],2)}const Ae=te(be,[["render",Ie]]),Se={__name:"Select",props:{modelValue:{type:String,required:!0},options:{type:Array,required:!0},isRequired:{type:Boolean,default:!1},label:{type:String,default:""},name:{type:String,default:""}},setup(e){const n=e;return(m,a)=>{const _=Ae,C=x;return c(),Y(C,{required:n.isRequired,size:"xl",label:n.label,name:n.name},{default:$(()=>[b(_,{value:n.modelValue,onChange:a[0]||(a[0]=s=>m.$emit("update:modelValue",s.target.value)),options:n.options,"option-attribute":"name"},null,8,["value","options"])]),_:1},8,["required","label","name"])}}},Ve=Se,$e={class:"w-full flex gap-4 items-stretch"},Ne={__name:"update",async setup(e){let n,m;const a=se(),_=de(),C=ce();let s="Thêm Cầu Thủ Mới",l="http://localhost:8000/api/soccer/add";const t=me({name_soccer:"",birthday:"",category:"",team_id:""});if(a.query.soccer_id){s="Chỉnh Sửa Cầu Thủ",l="http://localhost:8000/api/soccer/update/"+a.query.soccer_id;const u=([n,m]=R(()=>M("http://localhost:8000/api/soccer/edit/"+a.query.soccer_id,"$IGIPKL0ACs")),n=await n,m(),n);for(const o in t.value)t.value[o]=u.data.value[0][o]}ge({title:s,meta:[{name:"description",content:s}]});const v=[{name:"Trong Nước",value:0},{name:"Nước Ngoài",value:1}],N=([n,m]=R(()=>M("http://localhost:8000/api/team","$4PFT4vEYXG")),n=await n,m(),n).data.value.map(u=>({name:u.name_team,value:u.id}));async function B(){try{const u=await $fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)});(u==="Soccer update successfully"||u==="Soccer added successfully")&&_.push("/soccer"),C.add({title:"Success",description:u})}catch(u){console.error(u)}}const O=u=>{const o=[];if(u.name_soccer===""&&o.push({path:"name_soccer",message:"Tên Cầu Thủ không được để trống"}),u.birthday==="")o.push({path:"birthday",message:"Sinh Nhật không được để trống"});else{const y=new Date(u.birthday).getFullYear(),h=new Date().getFullYear();h-y<18?o.push({path:"birthday",message:"Cầu Thủ phải từ 18 tuổi trở lên"}):h-y>40&&o.push({path:"birthday",message:"Cầu Thủ không được quá 40 tuổi"})}return u.category===""&&o.push({path:"category",message:"Loại Cầu Thủ không được để trống"}),u.team_id===""&&o.push({path:"team_id",message:"Đội Bóng không được để trống"}),o};return(u,o)=>{const y=ee,h=Ve,F=ve,I=ae,q=fe;return c(),Y(q,{class:"w-[768px] h-[4/5vh]"},{header:$(()=>[D(L(d(s)),1)]),main:$(()=>[b(I,{class:"flex flex-col gap-3",state:d(t),validate:O,onSubmit:B},{default:$(()=>[b(y,{modelValue:d(t).name_soccer,"onUpdate:modelValue":o[0]||(o[0]=p=>d(t).name_soccer=p),label:"Tên Cầu Thủ",name:"name_soccer",required:""},null,8,["modelValue"]),b(h,{modelValue:d(t).team_id,"onUpdate:modelValue":o[1]||(o[1]=p=>d(t).team_id=p),options:d(N),label:"Đội Bóng",name:"team_id",required:""},null,8,["modelValue","options"]),j("div",$e,[b(y,{class:"grow","input-type":"date",modelValue:d(t).birthday,"onUpdate:modelValue":o[2]||(o[2]=p=>d(t).birthday=p),label:"Sinh Nhật",name:"birthday",required:""},null,8,["modelValue"]),b(h,{class:"grow",modelValue:d(t).category,"onUpdate:modelValue":o[3]||(o[3]=p=>d(t).category=p),options:v,label:"Loại Cầu Thủ",name:"category",required:""},null,8,["modelValue"])]),j("div",null,[b(F,{type:"submit"},{default:$(()=>[D("Submit")]),_:1})])]),_:1},8,["state"])]),_:1})}}};export{Ne as default};
